#!/bin/sh

while [ "$1" != "" ]; do

echo "================================================================"
echo "================================================================"
echo "FILE: $1"
echo ""

cat $1 | awk '{ \
  if ( substr($1,1,1) != "#" ) { \
    if ( 0 < match($0, /[^a-zA-Z]awk[^a-zA-Z]/) ) { \
      FLG = 1; \
    } \
    if ( FLG != "" ) { \
      print; \
      if ( match($0, /[\\]$/) == 0 ) { \
        FLG = ""; \
        printf("\n================================================================\n\n"); \
      } \
    } \
  } \
}'


shift

done

