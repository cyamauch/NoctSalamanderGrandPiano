#!/bin/sh

# Equation of YAMAYA EA-1:
#   Y[cent] = (4.0+1.0**2)*(2.0**( ((x-20)-49)/12.0 ) ) - 5.0
#             x: MIDI key-id

echo "#KEY_ID CENT_SFZ_PREC CENT_SFZ"

cat key_n-id_pw.txt | awk '{\
  Y[1] = (4.0+1.0^2)*(2.0^( (($2-1-20)-49)/12.0 ) ) - 5.0; \
  Y[2] = (4.0+1.0^2)*(2.0^( (($2-20)-49)/12.0 ) ) - 5.0; \
  Y[3] = (4.0+1.0^2)*(2.0^( (($2+1-20)-49)/12.0 ) ) - 5.0; \
  D = Y[1]-Y[2]; \
  if ( $2 != "021" ) { printf("%03d %5.2f %+3.0f\n", $2-1, D, D); } \
  printf("%03d %5.2f %3.0f\n", $2, 0.0, 0.0); \
  D = Y[3]-Y[2]; \
  if ( $2 != "108" ) { printf("%03d %5.2f %+3.0f\n", $2+1, D, D); } \
}'



